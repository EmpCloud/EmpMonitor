function _0x13fe(_0x337636,_0x53e601){const _0x4b997c=_0x4b99();return _0x13fe=function(_0x13fe65,_0x2e8662){_0x13fe65=_0x13fe65-0x19a;let _0x3cbb75=_0x4b997c[_0x13fe65];return _0x3cbb75;},_0x13fe(_0x337636,_0x53e601);}function _0x4b99(){const _0xdbb4a0=['underscore','532053FKWaCB','65704IBmfRK','url','end','addData','activityPerSecond','reduce','166986JWTdIF','keystrokes','2eYWulg','slice','title','second','app','mouseMovements','length','108uUIYwC','exports','Data\x20added\x20successfully','appUsage','buttonClicks','status','160PxIWUr','filter','addAppUsage','63AeDSnO','some','68330ZqlwLa','YYYYMMDD','976008AOgqZg','3341899mJjYae','toISOString','chunk','user','start','./reports.model','utc','144276lwqYVP'];_0x4b99=function(){return _0xdbb4a0;};return _0x4b99();}const _0x43bc5b=_0x13fe;(function(_0x713c70,_0x1e380a){const _0x2f8a47=_0x13fe,_0x195871=_0x713c70();while(!![]){try{const _0x5b1eb9=-parseInt(_0x2f8a47(0x1a7))/0x1*(-parseInt(_0x2f8a47(0x1b2))/0x2)+-parseInt(_0x2f8a47(0x1a9))/0x3+-parseInt(_0x2f8a47(0x19f))/0x4+-parseInt(_0x2f8a47(0x19d))/0x5*(parseInt(_0x2f8a47(0x1b9))/0x6)+parseInt(_0x2f8a47(0x19b))/0x7*(parseInt(_0x2f8a47(0x1aa))/0x8)+parseInt(_0x2f8a47(0x1b0))/0x9*(parseInt(_0x2f8a47(0x1bf))/0xa)+parseInt(_0x2f8a47(0x1a0))/0xb;if(_0x5b1eb9===_0x1e380a)break;else _0x195871['push'](_0x195871['shift']());}catch(_0x19729b){_0x195871['push'](_0x195871['shift']());}}}(_0x4b99,0x24fe5));const ReportModel=require(_0x43bc5b(0x1a5)),moment=require('moment-timezone'),_=require(_0x43bc5b(0x1a8));class ReportsController{async[_0x43bc5b(0x1ad)](_0x421ec9,_0x2318aa,_0x52d66d){const _0x4c9b8e=_0x43bc5b;let _0x41078d=_0x421ec9[_0x4c9b8e(0x1a3)];try{let {..._0x327ab0}=_0x421ec9['body'],_0x256f23={'employee_id':_0x41078d['id'],..._0x327ab0},_0x53b6f5=[];for(const _0x341f2d of _0x256f23['data']){let _0x232475=moment['utc'](_0x341f2d['dataId']);for(let _0x2be0b2 of _0x341f2d[_0x4c9b8e(0x1bc)]){let _0x1a6d6e=_0x2be0b2[_0x4c9b8e(0x1a4)],_0x7298c0=_0x2be0b2[_0x4c9b8e(0x1ac)],_0x25288f=moment[_0x4c9b8e(0x1a6)](_0x232475)['add'](_0x1a6d6e,_0x4c9b8e(0x1b5)),_0x130ce4=moment[_0x4c9b8e(0x1a6)](_0x232475)['add'](_0x7298c0,_0x4c9b8e(0x1b5)),_0x251e82=_0x341f2d[_0x4c9b8e(0x1ae)][_0x4c9b8e(0x1b1)][_0x4c9b8e(0x1b3)](_0x1a6d6e,_0x7298c0)[_0x4c9b8e(0x1c0)](_0x3e4051=>+_0x3e4051!==0x0)[_0x4c9b8e(0x1b8)],_0x2d1f90=_0x341f2d[_0x4c9b8e(0x1ae)][_0x4c9b8e(0x1b7)][_0x4c9b8e(0x1b3)](_0x1a6d6e,_0x7298c0)[_0x4c9b8e(0x1c0)](_0xb7cf78=>+_0xb7cf78!==0x0)[_0x4c9b8e(0x1b8)],_0x4d0959=_0x341f2d[_0x4c9b8e(0x1ae)][_0x4c9b8e(0x1bd)]['slice'](_0x1a6d6e,_0x7298c0)['filter'](_0x1150b4=>+_0x1150b4!==0x0)['length'];_0x1a6d6e===_0x7298c0&&(_0x7298c0=_0x7298c0+0x1);let {active_seconds:_0x2aef4f,total_seconds:_0x10e175}=calculateActivity(_0x1a6d6e,_0x7298c0,_0x341f2d['activityPerSecond'],_0x341f2d[_0x4c9b8e(0x1bc)]),_0x370395=await ReportModel[_0x4c9b8e(0x19a)]({'employee_id':_0x41078d['id'],'application_name':_0x2be0b2[_0x4c9b8e(0x1b6)],'title':_0x2be0b2[_0x4c9b8e(0x1b4)],'url':_0x2be0b2[_0x4c9b8e(0x1ab)],'start_time':_0x25288f[_0x4c9b8e(0x1a1)](),'end_time':_0x130ce4[_0x4c9b8e(0x1a1)](),'yyyymmdd':_0x232475['format'](_0x4c9b8e(0x19e)),'keystrokes':_0x2be0b2[_0x4c9b8e(0x1b1)]??'','keystrokesCount':_0x251e82,'mouseMovementsCount':_0x2d1f90,'buttonClicks':_0x4d0959,'active_seconds':_0x2aef4f,'total_seconds':_0x10e175,'idle_seconds':_0x10e175-_0x2aef4f});_0x53b6f5['push'](_0x370395);}}return _0x2318aa[_0x4c9b8e(0x1be)](0xc8)['json']({'code':0xc8,'message':_0x4c9b8e(0x1bb),'data':_0x53b6f5});}catch(_0x385dc0){console['log'](_0x385dc0),_0x52d66d(_0x385dc0);}}}module[_0x43bc5b(0x1ba)]=new ReportsController();const calculateActivity=(_0x2dd8fc,_0x4b0caa,_0x16728d,_0x2c2f00)=>{const _0x1f437b=_0x43bc5b,_0x5e2d02=0x3c;let {buttonClicks:_0x292204,fakeActivities:_0x27b9fa,keystrokes:_0x173556,mouseMovements:_0x2bb25b}=_0x16728d;const _0x2cf150=_0x292204['length']!==_0x2c2f00[_0x2c2f00['length']-0x1][_0x1f437b(0x1ac)]&&_0x292204[_0x1f437b(0x1b8)]==_0x2c2f00[_0x2c2f00[_0x1f437b(0x1b8)]-0x1][_0x1f437b(0x1ac)]+0x1&&_0x2c2f00[_0x2c2f00['length']-0x1][_0x1f437b(0x1ac)]==_0x4b0caa&&!(_0x292204[_0x1f437b(0x1b8)]-0x1==_0x2dd8fc);_0x2cf150?(_0x292204=_0x292204[_0x1f437b(0x1b3)](_0x2dd8fc,_0x2c2f00[_0x2c2f00[_0x1f437b(0x1b8)]-0x1]['end']+0x1),_0x27b9fa=_0x27b9fa[_0x1f437b(0x1b3)](_0x2dd8fc,_0x2c2f00[_0x2c2f00['length']-0x1][_0x1f437b(0x1ac)]+0x1),_0x173556=_0x173556[_0x1f437b(0x1b3)](_0x2dd8fc,_0x2c2f00[_0x2c2f00[_0x1f437b(0x1b8)]-0x1]['end']+0x1),_0x2bb25b=_0x2bb25b[_0x1f437b(0x1b3)](_0x2dd8fc,_0x2c2f00[_0x2c2f00[_0x1f437b(0x1b8)]-0x1][_0x1f437b(0x1ac)]+0x1)):(_0x292204=_0x292204['slice'](_0x2dd8fc,_0x4b0caa),_0x27b9fa=_0x27b9fa['slice'](_0x2dd8fc,_0x4b0caa),_0x173556=_0x173556['slice'](_0x2dd8fc,_0x4b0caa),_0x2bb25b=_0x2bb25b[_0x1f437b(0x1b3)](_0x2dd8fc,_0x4b0caa));const _0x575fc6=_[_0x1f437b(0x1a2)](_0x292204,_0x5e2d02),_0x41fbca=_['chunk'](_0x27b9fa,_0x5e2d02),_0x38359e=_['chunk'](_0x173556,_0x5e2d02),_0x46c8b4=_[_0x1f437b(0x1a2)](_0x2bb25b,_0x5e2d02),_0x528800=_0x575fc6[_0x1f437b(0x1af)]((_0x57b7ee,_0x2ef21d,_0x56f30b,_0x38301e)=>{const _0x37ad0f=_0x1f437b;return _0x575fc6[_0x56f30b][_0x37ad0f(0x19c)](_0x127c08=>_0x127c08>0x0)||_0x41fbca[_0x56f30b]['some'](_0x38dcac=>_0x38dcac>0x0)||_0x38359e[_0x56f30b]['some'](_0x2b934c=>_0x2b934c>0x0)||_0x46c8b4[_0x56f30b][_0x37ad0f(0x19c)](_0x244d41=>_0x244d41>0x0)?_0x57b7ee+_0x2ef21d[_0x37ad0f(0x1b8)]:_0x57b7ee+0x0;},0x0);return{'active_seconds':_0x528800,'total_seconds':_0x4b0caa-_0x2dd8fc,'mouseclicks_count':_0x292204[_0x1f437b(0x1c0)](_0x242083=>_0x242083!==0x0)[_0x1f437b(0x1b8)],'keystrokes_count':_0x173556[_0x1f437b(0x1c0)](_0x385de5=>_0x385de5!==0x0)[_0x1f437b(0x1b8)],'mousemovement_count':_0x2bb25b[_0x1f437b(0x1c0)](_0x1b4908=>_0x1b4908!==0x0)[_0x1f437b(0x1b8)],'condition':_0x2cf150,'chunkData':{'buttonClickChunks':_0x575fc6,'fakeActivityChunks':_0x41fbca,'keystrokeChunks':_0x38359e,'mouseMovementChunks':_0x46c8b4}};};